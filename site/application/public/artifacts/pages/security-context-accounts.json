{"label":"Security Context Accounts","rows":[{"id":1,"state":{"hideMode":null},"cells":[{"id":2,"rows":[{"id":4,"state":{"hideMode":null},"cells":[{"id":90,"rows":[{"id":91,"state":{"hideMode":null},"cells":[{"id":92,"rows":[],"alias":"typography-h5","bindings":{},"name":null,"state":{"hideMode":null,"fragments":{},"content":"%{Users}"},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column-typography-h5"},"typography":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"typography-h5"}}}},{"id":93,"rows":[],"alias":"typography-paragraph","bindings":{},"name":null,"state":{"hideMode":null,"fragments":{},"content":"%{Select a user to check their configured roles on this specific entity or child entities}"},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column-typography-paragraph"},"typography":{"variant":"subscript","modifiers":[],"options":[],"conditions":{},"defaultVariant":"typography-p"}}}}],"class":null,"customId":null,"condition":null,"direction":null,"align":null,"on":null,"collapsed":false,"name":null,"aris":{"components":{"page-row":{"variant":null,"modifiers":[],"options":["direction_vertical","spacing_gap-small"],"conditions":{}}}}}],"alias":null,"bindings":{},"name":"Header","state":{"hideMode":null},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column"},"form-component":{"variant":null,"modifiers":[],"options":[],"conditions":{}},"typography":{"variant":"subscript","modifiers":[],"options":[],"conditions":{},"defaultVariant":"typography-p"}}}},{"id":6,"rows":[{"id":7,"state":{},"cells":[{"id":20,"rows":[],"alias":"page-form-text","bindings":{},"name":"Q","state":{"name":"repeatAccount.filter.q","label":null,"timeout":600,"placeholder":"%{Search users}","suffixIcon":"search","hideMode":null,"textType":null,"bindings":{}},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":["fill_normal"],"conditions":{},"defaultVariant":"page-column-page-form-text"},"form-component":{"variant":null,"modifiers":[],"options":[],"conditions":{}}}}}],"class":null,"customId":null,"condition":null,"direction":null,"align":null,"on":null,"collapsed":false,"name":"Table Filters","aris":{"components":{"page-row":{"variant":null,"modifiers":[],"options":["spacing_gap-small"],"conditions":{}}}},"templateReferenceId":"nabu-templates-25","templateFragmentId":28},{"id":128,"state":{"hideMode":"script"},"cells":[{"id":133,"rows":[],"alias":"page-button","bindings":{},"name":null,"state":{"hideMode":null,"bindings":{},"actionTarget":null,"activeRoutes":[],"triggers":[{"actions":[{"event":null,"url":null,"action":null,"actionTarget":null,"actionEvent":null,"route":null,"mask":null,"anchor":null,"activeRoutes":[],"bindings":{},"type":"javascript","javascript":"$value(\"page.$this\").set(\"userSearchContextId\", $value(\"page.contextId\"))"}],"trigger":"activate"}],"fragments":{"context":{"dateFormat":null,"tag":null,"html":null,"javascript":null,"amountOfDecimals":null,"key":"page.context.name"}},"content":"%{Users in {context}}","componentGroup":"listableContexts","activateByDefault":true,"disabled":"","activationType":"group"},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column-page-button"},"page-button":{"variant":"primary","modifiers":[],"options":["spacing_xsmall"],"conditions":{"border_none":null,"spacing_xsmall":null}}}},"triggers":[]},{"id":132,"rows":[],"alias":"typography-fragment","bindings":{},"name":null,"state":{"hideMode":null,"fragments":{},"content":"%{Users in realm}"},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column-typography-fragment"},"typography":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"typography-span"}}}},{"id":129,"rows":[{"id":130,"state":{"hideMode":null},"cells":[{"id":131,"rows":[],"alias":"page-button","bindings":{},"name":null,"state":{"hideMode":"script","bindings":{},"actionTarget":null,"activeRoutes":[],"triggers":[{"actions":[{"event":null,"url":null,"action":null,"actionTarget":null,"actionEvent":null,"route":null,"mask":null,"anchor":null,"activeRoutes":[],"bindings":{},"type":"javascript","javascript":"$value(\"page.$this\").set(\"userSearchContextId\", $value(\"repeatListableContext.record.id\"))"}],"trigger":"activate"}],"fragments":{"context":{"dateFormat":null,"tag":null,"html":null,"javascript":null,"amountOfDecimals":null,"key":"repeatListableContext.record.name"}},"content":"{context}","componentGroup":"listableContexts","activeInitial":"","activateByDefault":false,"activationType":"group"},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":"$value(\"page.contextId\") != $value(\"repeatListableContext.record.id\")","devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column-page-button"},"page-button":{"variant":"link","modifiers":[],"options":[],"conditions":{}}}},"closeable":false}],"class":null,"customId":null,"condition":null,"direction":null,"align":null,"on":null,"collapsed":false,"name":null,"aris":{"components":{"page-row":{"variant":null,"modifiers":[],"options":[],"conditions":{}}}}}],"alias":null,"bindings":{},"name":null,"state":{"hideMode":null},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column"},"repeat-content":{"variant":null,"modifiers":[],"options":[],"conditions":{}},"repeat-message":{"variant":null,"modifiers":[],"options":[],"conditions":{}},"repeat-empty":{"variant":null,"modifiers":[],"options":[],"conditions":{}},"repeat-loading":{"variant":null,"modifiers":[],"options":[],"conditions":{}}}},"renderer":"repeat","repeat":{"bindings":{},"defaultOrderBy":[],"array":"page.listableContexts.results","type":"array","customSlots":[],"arrayFilter":"function(result) {\n\treturn result.componentName == \"realm\";\n}"},"rendererBindings":{},"runtimeAlias":"repeatListableContext"}],"class":null,"customId":null,"condition":"$value(\"page.listableContexts.results\")\n.filter(function(x) { return x.componentName == \"realm\" }).length > 0","direction":null,"align":null,"on":null,"collapsed":false,"name":"Context listing","aris":{"components":{"page-row":{"variant":null,"modifiers":[],"options":["align_cross-center","spacing_gap-medium"],"conditions":{}}}},"closeable":false}],"alias":null,"bindings":{},"name":"Filter container","state":{"hideMode":null},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":["spacing_gap-small"],"conditions":{},"defaultVariant":"page-column"}}},"templateReferenceId":"nabu-templates-25","templateFragmentId":27},{"id":8,"rows":[{"id":9,"state":{},"cells":[{"id":25,"rows":[],"alias":"page-tag","bindings":{},"name":null,"state":{"field":"repeatAccount.filter.q","content":"%{Search}"},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column-page-tag"},"page-tag":{"variant":"primary-dark-outline","modifiers":[],"options":["direction_reverse","decoration_emphasis"],"conditions":{}}}}}],"class":null,"customId":null,"condition":null,"direction":null,"align":null,"on":null,"collapsed":false,"name":"Table Tags","aris":{"components":{"page-row":{"variant":null,"modifiers":[],"options":["spacing_gap-small"],"conditions":{}}}},"templateReferenceId":"nabu-templates-25","templateFragmentId":38}],"alias":null,"bindings":{},"name":"Tag container","state":{},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column"}}},"templateReferenceId":"nabu-templates-25","templateFragmentId":37},{"id":11,"rows":[{"id":12,"state":{},"cells":[{"id":30,"rows":[],"alias":"page-button-sort","bindings":{},"name":null,"state":{"content":"%{User}","sortFields":[{"name":"alias"}],"target":14,"hideMode":null,"fragments":{}},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column-page-button-sort"},"page-button-sort":{"variant":null,"modifiers":[],"options":["size_small","spacing_horizontal-sides-none","direction_reverse"],"conditions":{}},"table-column":{"variant":null,"modifiers":[],"options":[],"conditions":{}}}}},{"id":200,"rows":[],"alias":"typography-fragment","bindings":{},"name":null,"state":{},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"table-column":{"variant":null,"modifiers":[],"options":[],"conditions":{}},"typography":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"typography-span"}}}}],"class":null,"customId":null,"condition":null,"direction":null,"align":null,"on":null,"collapsed":false,"name":"Table header","aris":{"components":{"page-row":{"variant":null,"modifiers":[],"options":[],"conditions":{}}}},"rendererSlot":"header","excludeFromTemplate":false,"templateReferenceId":"nabu-templates-25","templateFragmentId":31},{"id":14,"state":{"hideMode":null},"cells":[{"id":44,"rows":[{"id":45,"state":{"hideMode":null},"cells":[{"id":47,"rows":[],"alias":"typography-fragment","bindings":{},"name":null,"state":{"content":"{email}","fragments":{"email":{"key":"repeatAccount.record.email","format":null,"dateFormat":null,"tag":null,"html":null,"javascript":null,"amountOfDecimals":null},"alias":{"dateFormat":null,"tag":null,"html":null,"javascript":null,"amountOfDecimals":null,"key":"repeatAccount.record.alias"},"e":{"dateFormat":null,"tag":null,"html":null,"javascript":null,"amountOfDecimals":null}},"hideMode":"script"},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":"$value(\"repeatAccount.record.email\")","devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column-typography-fragment"},"typography":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"typography-span"}}},"closeable":false},{"id":113,"rows":[],"alias":"typography-fragment","bindings":{},"name":null,"state":{"content":"{phone}","fragments":{"email":{"key":"repeatAccount.record.email","format":null,"dateFormat":null,"tag":null,"html":null,"javascript":null,"amountOfDecimals":null},"alias":{"dateFormat":null,"tag":null,"html":null,"javascript":null,"amountOfDecimals":null,"key":"repeatAccount.record.alias"},"e":{"dateFormat":null,"tag":null,"html":null,"javascript":null,"amountOfDecimals":null},"phone":{"dateFormat":null,"tag":null,"html":null,"javascript":null,"amountOfDecimals":null,"key":"repeatAccount.record.phoneNumber"}},"hideMode":"script"},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":"!$value(\"repeatAccount.record.email\")\n\t&& $value(\"repeatAccount.record.phoneNumber\")","devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column-typography-fragment"},"typography":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"typography-span"}}},"closeable":false},{"id":46,"rows":[],"alias":"typography-fragment","bindings":{},"name":null,"state":{"content":"{alias}","fragments":{"email":{"key":"repeatAccount.record.email","format":null,"dateFormat":null,"tag":null,"html":null,"javascript":null,"amountOfDecimals":null},"alias":{"dateFormat":null,"tag":null,"html":null,"javascript":null,"amountOfDecimals":null,"key":"repeatAccount.record.alias"}},"hideMode":"script"},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":"!$value(\"repeatAccount.record.email\")\n\t&& !$value(\"repeatAccount.record.phoneNumber\")","devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column-typography-fragment"},"typography":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"typography-span"}}},"closeable":false,"triggers":[]},{"id":43,"rows":[],"alias":"page-badge","bindings":{},"name":null,"state":{"content":"{givenName} {familyName}","fragments":{"alias":{"key":"repeatAccount.record.alias","format":null,"dateFormat":null,"tag":null,"html":null,"javascript":null,"amountOfDecimals":null},"givenName":{"dateFormat":null,"tag":null,"html":null,"javascript":null,"amountOfDecimals":null,"key":"repeatAccount.record.givenName"},"familyName":{"dateFormat":null,"tag":null,"html":null,"javascript":null,"amountOfDecimals":null,"key":"repeatAccount.record.familyName"}},"hideMode":"script"},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":"$value(\"repeatAccount.record.familyName\") != null","devices":[],"clickEvent":null,"aris":{"components":{"table-column":{"variant":null,"modifiers":["empty"],"options":[],"conditions":{"empty":"$value(\"repeatAccount.record.alias\") == null"}},"typography":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"typography-span"},"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column-page-badge"},"page-badge":{"variant":"primary-dark-outline","modifiers":[],"options":[],"conditions":{}}}},"closeable":false,"table":{}},{"id":247,"rows":[],"alias":"page-badge","bindings":{},"name":null,"state":{"hideMode":"script","content":"Unverified","fragments":{}},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":"!$value(\"repeatAccount.record.verified\")","devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column-page-badge"},"page-badge":{"variant":"warning-inverted","modifiers":[],"options":[],"conditions":{}}}},"table":{},"closeable":false}],"class":null,"customId":null,"condition":null,"direction":null,"align":null,"on":null,"collapsed":false,"name":null,"aris":{"components":{"page-row":{"variant":null,"modifiers":[],"options":["spacing_vertical-small","spacing_gap-small","align_cross-center"],"conditions":{}}}}}],"alias":null,"bindings":{},"name":"name","state":{"hideMode":null},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"table-column":{"variant":null,"modifiers":["empty"],"options":[],"conditions":{"empty":"$value(\"repeatAccount.record.email\") == null"}},"typography":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"typography-span"}}},"table":{}},{"id":119,"rows":[{"id":120,"state":{},"cells":[{"id":246,"rows":[],"alias":"page-button","bindings":{},"name":null,"state":{"hideMode":"script","bindings":{},"actionTarget":null,"activeRoutes":[],"triggers":[],"fragments":{},"content":"","icon":"check","tooltip":"Verify user","stopPropagation":true,"activationType":"route"},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":"!$value(\"repeatAccount.record.verified\")","devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column-page-button"},"page-button":{"variant":"ghost","modifiers":[],"options":["size_small"],"conditions":{}}}},"table":{},"triggers":[{"actions":[{"event":null,"url":null,"action":null,"actionTarget":null,"actionEvent":null,"route":null,"mask":null,"anchor":null,"activeRoutes":[],"bindings":{"accountId":"repeatAccount.record.id"},"type":"operation","operation":"nabu.cms.core.v2.manage.security.account.verify"},{"event":null,"url":null,"action":"refresh","actionTarget":14,"actionEvent":null,"route":null,"mask":null,"anchor":null,"activeRoutes":[],"bindings":{},"type":"action"}],"trigger":"activate"}],"closeable":false},{"id":248,"rows":[],"alias":"page-button","bindings":{},"name":null,"state":{"hideMode":null,"bindings":{},"actionTarget":null,"activeRoutes":[],"triggers":[],"fragments":{},"content":"","icon":"chevron-down","tooltip":"Toggle user rules","stopPropagation":true,"activationType":"route"},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column-page-button"},"page-button":{"variant":"ghost","modifiers":[],"options":["size_small"],"conditions":{}}}},"table":{},"triggers":[{"actions":[{"event":null,"url":null,"action":"toggle-slot","actionTarget":14,"actionEvent":null,"route":null,"mask":null,"anchor":null,"activeRoutes":[],"bindings":{"index":"repeatAccount.recordIndex","slot":"fixed.userRules"},"type":"action"}],"trigger":"activate"}]},{"id":118,"rows":[],"alias":"page-button","bindings":{},"name":null,"state":{"hideMode":null,"bindings":{},"actionTarget":null,"activeRoutes":[],"triggers":[{"actions":[{"event":{"eventFields":[{"name":"account","fixedValue":null,"isFixed":false,"stateValue":"repeatAccount.record"}],"name":"viewUser"},"url":null,"action":null,"actionTarget":null,"actionEvent":null,"route":null,"mask":null,"anchor":null,"activeRoutes":[],"bindings":{},"type":"event"}],"trigger":"activate"}],"fragments":{},"content":"","icon":"search","tooltip":"View user details","stopPropagation":true,"activationType":"route"},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column-page-button"},"page-button":{"variant":"ghost","modifiers":[],"options":["size_small"],"conditions":{}}}}},{"id":182,"rows":[],"alias":"page-button","bindings":{},"name":null,"state":{"hideMode":"script","bindings":{},"actionTarget":null,"activeRoutes":[],"triggers":[{"actions":[{"event":{"eventFields":[{"name":"user","fixedValue":null,"isFixed":false,"stateValue":"repeatAccount.record"}],"name":"synchronizeUser"},"url":null,"action":null,"actionTarget":null,"actionEvent":null,"route":null,"mask":null,"anchor":null,"activeRoutes":[],"bindings":{},"type":"event"}],"trigger":"activate"}],"fragments":{},"content":"","icon":"upload","tooltip":"Synchronize user to proxy context","stopPropagation":true,"activationType":"route"},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":"function() {\n\tif ($value(\"page.context.componentName\") != \"realm\") {\n\t\treturn false;\n\t}\n\tvar records = $value(\"parent.repeatContext.records\");\n\tif (!records) {\n\t\treturn false;\n\t}\n\t// check that there are proxy objects in the parent listing\n\treturn records.filter(function(x) {\n\t\treturn x.componentName == \"proxy\";\n\t}).length > 0;\n}","devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column-page-button"},"page-button":{"variant":"ghost","modifiers":[],"options":["size_small"],"conditions":{}}}},"closeable":false},{"id":121,"rows":[{"id":122,"state":{"hideMode":null},"cells":[{"id":123,"rows":[],"alias":"page-button","bindings":{},"name":null,"state":{"hideMode":null,"bindings":{},"actionTarget":null,"activeRoutes":[],"triggers":[{"actions":[{"event":null,"url":null,"action":null,"actionTarget":null,"actionEvent":null,"route":null,"mask":null,"anchor":null,"activeRoutes":[],"bindings":{"targetContextId":"repeatImpersonateables.record.contextId","userId":"repeatAccount.record.id"},"type":"operation","operation":"nabu.cms.core.v2.manage.security.context.synchronizeUser","resultName":"remoteUserId"},{"event":null,"url":"=$value(\"repeatImpersonateables.record.link\").replace(\"{userId}\", $value(\"remoteUserId.userId\"))","action":null,"actionTarget":null,"actionEvent":null,"route":null,"mask":null,"anchor":"$blank","activeRoutes":[],"bindings":{},"type":"route"}],"trigger":"activate"}],"fragments":{},"content":"","tooltip":"=\"Impersonate in \" + $value(\"repeatImpersonateables.record.name\")","icon":"user","stopPropagation":true,"activationType":"route"},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column-page-button"},"page-button":{"variant":"ghost","modifiers":[],"options":["size_small"],"conditions":{}}}}}],"class":null,"customId":null,"condition":null,"direction":null,"align":null,"on":null,"collapsed":false,"name":null,"aris":{"components":{"page-row":{"variant":null,"modifiers":[],"options":[],"conditions":{}}}}}],"alias":null,"bindings":{},"name":null,"state":{"hideMode":null},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"table-column":{"variant":null,"modifiers":[],"options":[],"conditions":{}},"repeat-content":{"variant":null,"modifiers":[],"options":[],"conditions":{}},"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column"}}},"table":{},"renderer":"repeat","repeat":{"bindings":{},"defaultOrderBy":[],"array":"page.impersonateables.applications"},"rendererBindings":{},"runtimeAlias":"repeatImpersonateables"}],"class":null,"customId":null,"condition":null,"direction":null,"align":null,"on":null,"collapsed":false,"name":null}],"alias":null,"bindings":{},"name":"buttons","state":{},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"table-column":{"variant":null,"modifiers":[],"options":[],"conditions":{}},"page-button":{"variant":"ghost","modifiers":[],"options":["size_small"],"conditions":{}}}}},{"id":205,"rows":[{"id":206,"state":{"hideMode":null},"cells":[{"id":207,"rows":[{"id":208,"state":{"hideMode":null},"cells":[{"id":209,"rows":[],"alias":"typography-h5","bindings":{},"name":null,"state":{"hideMode":null,"fragments":{},"content":"%{Rules}"},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column-typography-h5"},"typography":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"typography-h5"}}},"table":{}}],"class":null,"customId":null,"condition":null,"direction":null,"align":null,"on":null,"collapsed":false,"name":null,"aris":{"components":{"page-row":{"variant":null,"modifiers":[],"options":["direction_vertical","spacing_gap-small"],"conditions":{}}}}}],"alias":null,"bindings":{},"name":"Header","state":{"hideMode":null},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column"},"form-component":{"variant":null,"modifiers":[],"options":[],"conditions":{}},"typography":{"variant":"subscript","modifiers":[],"options":[],"conditions":{},"defaultVariant":"typography-p"}}},"table":{}},{"id":211,"rows":[{"id":212,"state":{},"cells":[{"id":213,"rows":[],"alias":"page-form-text","bindings":{},"name":"Q","state":{"name":"repeatAssignedChildren.filter.q","label":null,"timeout":600,"placeholder":"%{Search entities}","suffixIcon":"search","hideMode":null,"textType":null,"bindings":{}},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":["width_min-xsmall"],"conditions":{},"defaultVariant":"page-column-page-form-text"},"form-component":{"variant":null,"modifiers":[],"options":[],"conditions":{}}}}}],"class":null,"customId":null,"condition":null,"direction":null,"align":null,"on":null,"collapsed":false,"name":"Table Filters","aris":{"components":{"page-row":{"variant":null,"modifiers":[],"options":["spacing_gap-small"],"conditions":{}}}},"templateReferenceId":"nabu-templates-25","templateFragmentId":28}],"alias":null,"bindings":{},"name":"Filter container","state":{},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column"}}},"templateReferenceId":"nabu-templates-25","templateFragmentId":27},{"id":214,"rows":[{"id":215,"state":{},"cells":[{"id":216,"rows":[],"alias":"page-tag","bindings":{},"name":null,"state":{"field":"repeatAssignedChildren.filter.q","content":"%{Search}"},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column-page-tag"},"page-tag":{"variant":"primary-dark-outline","modifiers":[],"options":["direction_reverse","decoration_emphasis"],"conditions":{}}}}}],"class":null,"customId":null,"condition":null,"direction":null,"align":null,"on":null,"collapsed":false,"name":"Table Tags","aris":{"components":{"page-row":{"variant":null,"modifiers":[],"options":["spacing_gap-small"],"conditions":{}}}},"templateReferenceId":"nabu-templates-25","templateFragmentId":38}],"alias":null,"bindings":{},"name":"Tag container","state":{},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column"}}},"templateReferenceId":"nabu-templates-25","templateFragmentId":37},{"id":217,"rows":[{"id":218,"state":{},"cells":[{"id":219,"rows":[],"alias":"page-button-sort","bindings":{},"name":null,"state":{"content":"%{Name}","sortFields":[{"name":"name"}],"target":62,"hideMode":null,"fragments":{}},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column-page-button-sort"},"page-button-sort":{"variant":null,"modifiers":[],"options":["size_small","spacing_horizontal-sides-none","direction_reverse"],"conditions":{}},"table-column":{"variant":null,"modifiers":[],"options":["align_bottom"],"conditions":{}}}}},{"id":220,"rows":[{"id":221,"state":{},"cells":[{"id":222,"rows":[],"alias":"typography-fragment","bindings":{},"name":null,"state":{"hideMode":null,"fragments":{"role":{"dateFormat":null,"tag":null,"html":null,"javascript":null,"amountOfDecimals":null,"key":"repeatRole.record.name"}},"content":"{role}"},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column-typography-fragment"},"typography":{"variant":null,"modifiers":[],"options":["rotate_90deg-reverse"],"conditions":{},"defaultVariant":"typography-span"}}}}],"class":null,"customId":null,"condition":null,"direction":null,"align":null,"on":null,"collapsed":false,"name":null}],"alias":null,"bindings":{},"name":null,"state":{"hideMode":null,"fragments":{"role":{"dateFormat":null,"tag":null,"html":null,"javascript":null,"amountOfDecimals":null,"key":"repeatRole.record.name"}},"content":"{role}"},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"table-column":{"variant":null,"modifiers":["small"],"options":["direction_horizontal","align_bottom"],"conditions":{}},"repeat-content":{"variant":null,"modifiers":[],"options":[],"conditions":{}},"typography":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"typography-span"}}},"table":{},"renderer":"repeat","repeat":{"bindings":{},"defaultOrderBy":[],"operation":null,"array":"page.publicRoles"},"rendererBindings":{},"runtimeAlias":"repeatRole"},{"id":223,"rows":[],"alias":"typography-fragment","bindings":{},"name":null,"state":{"hideMode":null,"fragments":{},"content":""},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"table-column":{"variant":null,"modifiers":[],"options":[],"conditions":{}},"typography":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"typography-span"}}},"table":{}}],"class":null,"customId":null,"condition":null,"direction":null,"align":null,"on":null,"collapsed":false,"name":"Table header","aris":{"components":{"page-row":{"variant":null,"modifiers":[],"options":[],"conditions":{}}}},"rendererSlot":"header","excludeFromTemplate":false,"templateReferenceId":"nabu-templates-25","templateFragmentId":31},{"id":224,"state":{"hideMode":null},"cells":[{"id":225,"rows":[{"id":226,"state":{"hideMode":null},"cells":[{"id":227,"rows":[],"alias":"typography-fragment","bindings":{},"name":null,"state":{"content":"{name}","fragments":{"name":{"key":"repeatAssignedChildren.record.name","format":null,"dateFormat":null,"tag":null,"html":null,"javascript":null,"amountOfDecimals":null}},"hideMode":null},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column-typography-fragment"},"typography":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"typography-span"}}}},{"id":228,"rows":[],"alias":"page-badge","bindings":{},"name":null,"state":{"hideMode":null,"fragments":{"component":{"dateFormat":null,"tag":null,"html":null,"javascript":null,"amountOfDecimals":null,"key":"repeatAssignedChildren.record.componentName","format":null,"resolveOperationBinding":{},"resolveOperation":null,"resolveOperationLabel":"name","resolveOperationId":"id","resolveOperationIds":"id"}},"content":"{component}"},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column-page-badge"},"page-badge":{"variant":null,"modifiers":[],"options":[],"conditions":{}}}}}],"class":null,"customId":null,"condition":null,"direction":null,"align":null,"on":null,"collapsed":false,"name":null,"aris":{"components":{"page-row":{"variant":null,"modifiers":[],"options":["spacing_gap-small"],"conditions":{}}}}}],"alias":null,"bindings":{},"name":"Wrapper for Fragment","state":{},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"table-column":{"variant":null,"modifiers":["empty"],"options":[],"conditions":{"empty":"$value(\"repeatAssignedChildren.record.name\") == null"}},"typography":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"typography-span"}}}},{"id":229,"rows":[{"id":230,"state":{"hideMode":null},"cells":[{"id":231,"rows":[],"alias":"page-smart-check","bindings":{},"name":null,"state":{"hideMode":null,"fragments":{"role":{"dateFormat":null,"tag":null,"html":null,"javascript":null,"amountOfDecimals":null,"key":"repeatRole.record.name"}},"content":"{role}","bindings":{},"triggers":[{"actions":[{"event":null,"url":null,"action":null,"actionTarget":null,"actionEvent":null,"route":null,"mask":null,"anchor":null,"activeRoutes":[],"bindings":{"actionId":"repeatAction.record.id","roleId":"repeatRoleMembership.record.id","contextId":"repeatAssignedChildren.record.id","accountId":"repeatAccount.record.id"},"type":"operation","operation":"nabu.cms.core.v2.manage.security.context.account.add"},{"event":null,"url":null,"action":null,"actionTarget":null,"actionEvent":null,"route":null,"mask":null,"anchor":null,"activeRoutes":[],"bindings":{},"type":"javascript","javascript":"function() {\n\tvar roleId = $value(\"repeatRoleMembership.record.id\")\n\tvar memberships = $value(\"repeatAssignedChildren.record.memberships\");\n\tif (!memberships) {\n\t\tvar record = $value(\"repeatAssignedChildren.record\");\n\t\tmemberships = [];\n\t\tVue.set(record, \"memberships\", memberships);\n\t}\n\tmemberships.push({\n\t\troleId: roleId\n\t});\n}\n"}],"trigger":"check"},{"actions":[{"event":null,"url":null,"action":null,"actionTarget":null,"actionEvent":null,"route":null,"mask":null,"anchor":null,"activeRoutes":[],"bindings":{"actionId":"repeatAction.record.id","roleId":"repeatRoleMembership.record.id","contextId":"repeatAssignedChildren.record.id","accountId":"repeatAccount.record.id"},"type":"operation","operation":"nabu.cms.core.v2.manage.security.context.account.remove"},{"event":null,"url":null,"action":null,"actionTarget":null,"actionEvent":null,"route":null,"mask":null,"anchor":null,"activeRoutes":[],"bindings":{},"type":"javascript","javascript":"function() {\n\tvar roleId = $value(\"repeatRoleMembership.record.id\")\n\tvar memberships = $value(\"repeatAssignedChildren.record.memberships\");\n\tif (memberships) {\n\t\tvar existing = memberships.filter(function(x) {\n\t\t\treturn x.roleId == roleId;\n\t\t})[0];\n\t\tif (existing) {\n\t\t\tmemberships.splice(memberships.indexOf(existing), 1);\n\t\t}\n\t}\n}"}],"trigger":"clear"}],"checkCondition":"function() {\n\tvar roleId = $value(\"repeatRoleMembership.record.id\")\n\tvar memberships = $value(\"repeatAssignedChildren.record.memberships\");\n\tconsole.log(\"checking\", roleId, $value(\"repeatAssignedChildren.record\"));\n\tif (memberships) {\n\t\treturn memberships.filter(function(x) {\n\t\t\treturn x.roleId == roleId\n\t\t}).length > 0;\n\t}\n\treturn false;\n}","disabledCondition":"function() {\n\t// if the role has feature restrictions, check that the node has them\n\tvar limitingTags = $value(\"repeatRoleMembership.record.tagIds\");\n\t// check whether the node has it\n\tif (limitingTags && limitingTags.length > 0) {\n\t\tvar tags = $value(\"repeatAssignedChildren.record.tags\");\n\t\tif (tags) {\n\t\t\tvar matchingTags = tags.filter(function(x) {\n\t\t\t\treturn limitingTags.indexOf(x.definitionId) >= 0;\n\t\t\t});\n\t\t\t// you have the tag, it's ok\n\t\t\tif (matchingTags.length > 0) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\treturn false;\n}"},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column-page-smart-check"},"typography":{"variant":null,"modifiers":[],"options":["rotate_90deg-reverse"],"conditions":{},"defaultVariant":"typography-span"},"form-component":{"variant":null,"modifiers":[],"options":[],"conditions":{}}}},"table":{}}],"class":null,"customId":null,"condition":null,"direction":null,"align":null,"on":null,"collapsed":false,"name":null,"aris":{"components":{"page-row":{"variant":null,"modifiers":[],"options":[],"conditions":{}}}}}],"alias":null,"bindings":{},"name":null,"state":{"hideMode":null},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"table-column":{"variant":null,"modifiers":["small"],"options":[],"conditions":{}},"repeat-content":{"variant":null,"modifiers":[],"options":[],"conditions":{}}}},"table":{},"renderer":"repeat","repeat":{"bindings":{},"defaultOrderBy":[],"operation":null,"array":"page.publicRoles"},"rendererBindings":{},"runtimeAlias":"repeatRoleMembership"},{"id":232,"rows":[],"alias":"page-button","bindings":{},"name":null,"state":{"hideMode":null,"bindings":{},"actionTarget":null,"activeRoutes":[],"triggers":[{"actions":[{"event":null,"url":null,"action":null,"actionTarget":null,"actionEvent":null,"route":"security-context","mask":null,"anchor":null,"activeRoutes":[],"bindings":{"contextId":"repeatAssignedChildren.record.id","serviceContext":"page.serviceContext"},"type":"route"}],"trigger":"activate"}],"fragments":{},"content":"","icon":"chevron-right","activationType":"route","tooltip":"View entity context"},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":["position_right"],"conditions":{},"defaultVariant":"page-column-page-button"},"page-button":{"variant":"ghost","modifiers":[],"options":[],"conditions":{"size_small":null}},"table-column":{"variant":null,"modifiers":[],"options":[],"conditions":{"border_none":null,"small":null}}}}}],"class":null,"customId":null,"condition":null,"direction":null,"align":null,"on":null,"collapsed":false,"name":"Table Body AssignedChildren","aris":{"components":{"page-row":{"variant":null,"modifiers":[],"options":[],"conditions":{}},"repeat-content":{"variant":null,"modifiers":[],"options":[],"conditions":{}},"table-row":{"variant":null,"modifiers":[],"options":[],"conditions":{}}}},"renderer":"repeat","rendererBindings":{"filter.limit":"fixed.10","filter.contextId":"page.contextId","filter.accountId":"repeatAccount.record.id","filter.roleId":"page.roles.results.id","filter.requiredRoleId":"page.limitAccountToRoleIds"},"repeat":{"bindings":{},"operation":"nabu.cms.core.v2.manage.security.context.assignedChildren","emptyPlaceholder":"%{No data available}","loadingPlaceholder":"%{Loading...}","selectable":false,"defaultOrderBy":[{"name":"name","direction":"asc"}],"enableParameterWatching":true,"type":"operation","customSlots":[]},"runtimeAlias":"repeatAssignedChildren","templateReferenceId":"nabu-templates-25","templateFragmentId":32},{"id":233,"state":{"hideMode":"toggle"},"cells":[{"id":234,"rows":[{"id":235,"state":{"hideMode":null},"cells":[{"id":236,"rows":[],"alias":"typography-fragment","bindings":{},"name":null,"state":{"hideMode":null,"fragments":{},"content":"%{Add an entity}"},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column-typography-fragment"},"typography":{"variant":null,"modifiers":[],"options":["position_center"],"conditions":{},"defaultVariant":"typography-span"}}}},{"id":237,"rows":[],"alias":"page-form-enumeration-operation","bindings":{},"name":null,"state":{"hideMode":null,"enumerationProvider":null,"enumerationOperation":"nabu.cms.core.v2.manage.security.context.children","enumerationOperationLabel":"name","enumerationOperationValue":"id","enumerationOperationQuery":"q","enumerationOperationBinding":{"contextId":"page.contextId"},"name":"entityIdToAdd","emptyValue":"%{No available entities}","calculatingValue":"%{Getting entities...}","placeholder":"%{Find an entity}"},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column-page-form-enumeration-operation"},"form-component":{"variant":null,"modifiers":[],"options":["size_small"],"conditions":{}}}}},{"id":238,"rows":[],"alias":"page-button","bindings":{},"name":null,"state":{"hideMode":null,"bindings":{},"actionTarget":null,"activeRoutes":[],"triggers":[{"actions":[{"event":null,"url":null,"action":null,"actionTarget":null,"actionEvent":null,"route":null,"mask":null,"anchor":null,"activeRoutes":[],"bindings":{"contextId":"page.entityIdToAdd"},"type":"operation","operation":"nabu.cms.core.v2.manage.security.context.get","resultName":"newContext"},{"event":null,"url":null,"action":null,"actionTarget":null,"actionEvent":null,"route":null,"mask":null,"anchor":null,"activeRoutes":[],"bindings":{},"type":"javascript","javascript":"var records = $value(\"repeatAssignedChildren.records\");\nvar record = $value(\"newContext\");\nrecords.push(record);"},{"event":null,"url":null,"action":null,"actionTarget":null,"actionEvent":null,"route":null,"mask":null,"anchor":null,"activeRoutes":[],"bindings":{},"type":"visibility","closeableTarget":104,"closeableAction":"hidden"}],"trigger":"activate","condition":null}],"fragments":{},"content":"%{Add}","disabled":"!$value(\"page.entityIdToAdd\")"},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column-page-button"},"page-button":{"variant":"primary","modifiers":[],"options":["size_small"],"conditions":{}}}}},{"id":239,"rows":[],"alias":"page-button","bindings":{},"name":null,"state":{"hideMode":null,"bindings":{},"actionTarget":null,"activeRoutes":[],"triggers":[{"actions":[{"event":null,"url":null,"action":null,"actionTarget":null,"actionEvent":null,"route":null,"mask":null,"anchor":null,"activeRoutes":[],"bindings":{},"type":"visibility","closeableTarget":104,"closeableAction":"hidden"}],"trigger":"activate"}],"fragments":{},"content":"%{Cancel}"},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"table-column":{"variant":null,"modifiers":[],"options":[],"conditions":{}},"page-button":{"variant":"link","modifiers":[],"options":["size_small"],"conditions":{}},"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column-page-button"}}}}],"class":null,"customId":null,"condition":null,"direction":null,"align":null,"on":null,"collapsed":false,"name":null,"aris":{"components":{"page-row":{"variant":null,"modifiers":[],"options":["spacing_gap-small"],"conditions":{}}}}}],"alias":null,"bindings":{},"name":"Wrapper for Enumeration (Operation)","state":{"hideMode":null},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"table-column":{"variant":null,"modifiers":[],"options":[],"conditions":{}},"form-component":{"variant":null,"modifiers":[],"options":["size_small"],"conditions":{}}}},"table":{"colspan":"100"}}],"class":null,"customId":null,"condition":null,"direction":null,"align":null,"on":null,"collapsed":false,"name":"Add entity","aris":{"components":{"table-row":{"variant":null,"modifiers":[],"options":[],"conditions":{}}}},"closeable":true},{"id":240,"state":{},"cells":[{"id":241,"rows":[],"alias":"page-paging","bindings":{},"name":null,"state":{"target":224},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column-page-paging"},"paging-button":{"variant":null,"modifiers":[],"options":[],"conditions":{}},"paging-menu":{"variant":null,"modifiers":[],"options":[],"conditions":{}},"table-column":{"variant":null,"modifiers":[],"options":[],"conditions":{}}}},"triggers":[],"table":{"colspan":"100"},"templateReferenceId":"nabu-templates-25","templateFragmentId":34}],"class":null,"customId":null,"condition":null,"direction":null,"align":null,"on":null,"collapsed":false,"name":"Table paging","aris":{"components":{"page-row":{"variant":null,"modifiers":[],"options":["align_center"],"conditions":{}}}},"rendererSlot":"footer","templateReferenceId":"nabu-templates-25","templateFragmentId":33}],"alias":null,"bindings":{},"name":null,"state":{"hideMode":null},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column"},"table":{"variant":null,"modifiers":["has-local-actions"],"options":[],"conditions":{}}}},"renderer":"table","rendererBindings":{},"isTemplate":false,"templateVersion":2,"templateId":null,"templateTitle":"Basic Table","templateCategory":"Nabu Templates","templateIcon":"table","templateStable":null,"isTemplateInstance":true,"templateReferenceId":"nabu-templates-25","templateFragmentId":30},{"id":242,"rows":[{"id":243,"state":{"hideMode":null},"cells":[{"id":244,"rows":[],"alias":"page-button","bindings":{},"name":null,"state":{"hideMode":"script","bindings":{},"actionTarget":null,"activeRoutes":[],"triggers":[{"actions":[{"event":null,"url":null,"action":null,"actionTarget":null,"actionEvent":null,"route":null,"mask":null,"anchor":null,"activeRoutes":[],"bindings":{},"type":"javascript","javascript":"var records = $value(\"repeatAssignedChildren.records\");\nvar record = JSON.parse(JSON.stringify($value(\"page.context\")));\nrecords.push(record);"}],"trigger":"activate"}],"fragments":{"context":{"dateFormat":null,"tag":null,"html":null,"javascript":null,"amountOfDecimals":null,"key":"page.context.name"}},"content":"%{Add {context}}","activationType":"route"},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":"$value(\"page.context\") != null","devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column-page-button"},"page-button":{"variant":"link","modifiers":[],"options":[],"conditions":{}}}},"closeable":false,"table":{},"triggers":[]},{"id":245,"rows":[],"alias":"page-button","bindings":{},"name":null,"state":{"hideMode":null,"bindings":{},"actionTarget":null,"activeRoutes":[],"triggers":[{"actions":[{"event":null,"url":null,"action":null,"actionTarget":null,"actionEvent":null,"route":null,"mask":null,"anchor":null,"activeRoutes":[],"bindings":{},"type":"visibility","closeableTarget":104,"closeableAction":"visible"}],"trigger":"activate"}],"fragments":{},"content":"%{Add Entity}"},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column-page-button"},"page-button":{"variant":"primary","modifiers":[],"options":[],"conditions":{}}}}}],"class":null,"customId":null,"condition":null,"direction":null,"align":null,"on":null,"collapsed":false,"name":"Global Actions","aris":{"components":{"page-row":{"variant":null,"modifiers":[],"options":["spacing_gap-small","align_main-end","align_cross-center"],"conditions":{"align_end":null}}}},"templateReferenceId":"nabu-templates-25","templateFragmentId":36}],"alias":null,"bindings":{},"name":"Button container","state":{},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column"}}},"templateReferenceId":"nabu-templates-25","templateFragmentId":35}],"class":null,"customId":null,"condition":null,"direction":null,"align":null,"on":null,"collapsed":false,"name":"AssignedChildren Table","aris":{"components":{"page-row":{"variant":null,"modifiers":[],"options":["direction_vertical","spacing_large","spacing_gap-medium"],"conditions":{}}}},"isTemplate":false,"templateVersion":3,"templateId":null,"templateTitle":"Full table","templateCategory":"Nabu Templates","templateIcon":"table","templateDescription":"A table with a title, space for filters,...","templateStable":null,"isTemplateInstance":true,"templateReferenceId":"nabu-templates-25","templateFragmentId":25,"closeable":false,"triggers":[]}],"alias":null,"bindings":{},"name":"Card","state":{"hideMode":null},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":["fill_normal"],"conditions":{},"defaultVariant":"page-column"},"table-column":{"variant":"inline-detail","modifiers":[],"options":[],"conditions":{"fill_normal":null}}}},"table":{"colspan":"100"},"rendererSlot":"userRules","triggers":[]}],"class":null,"customId":null,"condition":null,"direction":null,"align":null,"on":null,"collapsed":false,"name":"Table Body Account","aris":{"components":{"page-row":{"variant":null,"modifiers":[],"options":[],"conditions":{}},"repeat-content":{"variant":null,"modifiers":[],"options":[],"conditions":{}},"table-row":{"variant":null,"modifiers":[],"options":[],"conditions":{}},"repeat-message":{"variant":null,"modifiers":[],"options":[],"conditions":{}},"repeat-empty":{"variant":null,"modifiers":[],"options":[],"conditions":{}},"repeat-loading":{"variant":null,"modifiers":[],"options":[],"conditions":{}}}},"renderer":"repeat","rendererBindings":{"filter.limit":"fixed.10","filter.roleId":"page.roles.results.id","filter.contextId":"page.userSearchContextId","filter.requiredRoleId":null},"repeat":{"bindings":{},"operation":"nabu.cms.core.v2.manage.security.context.account.list","emptyPlaceholder":"%{No users found}","loadingPlaceholder":"%{Loading...}","selectable":false,"defaultOrderBy":[{"name":"alias","direction":"asc"}],"enableParameterWatching":true,"type":"operation","customSlots":[{"name":"userRules","singleOpen":true}]},"runtimeAlias":"repeatAccount","templateReferenceId":"nabu-templates-25","templateFragmentId":32,"triggers":[]},{"id":15,"state":{},"cells":[{"id":16,"rows":[],"alias":"page-paging","bindings":{},"name":null,"state":{"target":14},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column-page-paging"},"paging-button":{"variant":null,"modifiers":[],"options":[],"conditions":{}},"paging-menu":{"variant":null,"modifiers":[],"options":[],"conditions":{}},"table-column":{"variant":null,"modifiers":[],"options":[],"conditions":{}}}},"triggers":[],"table":{"colspan":"100"},"templateReferenceId":"nabu-templates-25","templateFragmentId":34}],"class":null,"customId":null,"condition":null,"direction":null,"align":null,"on":null,"collapsed":false,"name":"Table paging","aris":{"components":{"page-row":{"variant":null,"modifiers":[],"options":["align_center"],"conditions":{}}}},"rendererSlot":"footer","templateReferenceId":"nabu-templates-25","templateFragmentId":33}],"alias":null,"bindings":{},"name":null,"state":{"hideMode":null},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column"},"table":{"variant":null,"modifiers":["has-local-actions"],"options":[],"conditions":{}}}},"renderer":"table","rendererBindings":{},"isTemplate":false,"templateVersion":2,"templateId":null,"templateTitle":"Basic Table","templateCategory":"Nabu Templates","templateIcon":"table","templateStable":null,"isTemplateInstance":true,"templateReferenceId":"nabu-templates-25","templateFragmentId":30},{"id":17,"rows":[{"id":18,"state":{"hideMode":null},"cells":[{"id":134,"rows":[],"alias":"page-button","bindings":{},"name":null,"state":{"hideMode":"script","bindings":{},"actionTarget":null,"activeRoutes":[],"activationType":"route","triggers":[{"actions":[{"event":null,"url":null,"action":null,"actionTarget":null,"actionEvent":null,"route":null,"mask":null,"anchor":null,"activeRoutes":[],"bindings":{},"type":"visibility","closeableTarget":137,"closeableAction":"visible"}],"trigger":"activate"}],"fragments":{},"content":"%{Create User}"},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":"$value(\"page.context.componentName\") == \"realm\"","devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column-page-button"},"page-button":{"variant":"primary","modifiers":[],"options":[],"conditions":{}}}},"permission":"user.create","closeable":false,"triggers":[]}],"class":null,"customId":null,"condition":null,"direction":null,"align":null,"on":null,"collapsed":false,"name":"Global Actions","aris":{"components":{"page-row":{"variant":null,"modifiers":[],"options":["align_end"],"conditions":{}}}},"templateReferenceId":"nabu-templates-25","templateFragmentId":36}],"alias":null,"bindings":{},"name":"Button container","state":{},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column"}}},"templateReferenceId":"nabu-templates-25","templateFragmentId":35}],"class":null,"customId":null,"condition":null,"direction":null,"align":null,"on":null,"collapsed":false,"name":"Account Table","aris":{"components":{"page-row":{"variant":null,"modifiers":[],"options":["direction_vertical","spacing_large","spacing_gap-medium"],"conditions":{}}}},"isTemplate":false,"templateVersion":3,"templateId":null,"templateTitle":"Full table","templateCategory":"Nabu Templates","templateIcon":"table","templateDescription":"A table with a title, space for filters,...","templateStable":null,"isTemplateInstance":true,"templateReferenceId":"nabu-templates-25","templateFragmentId":25}],"alias":null,"bindings":{},"name":"Card","state":{"hideMode":null},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":["border_right","color_background","fill_normal"],"conditions":{"width_min-medium":null,"width_max-medium":null},"defaultVariant":"page-column"}}},"triggers":[]}],"class":null,"customId":null,"condition":null,"direction":null,"align":null,"on":null,"collapsed":false,"name":"Cards","aris":{"components":{"page-row":{"variant":null,"modifiers":[],"options":["border_bottom","color_background"],"conditions":{}}}}},{"id":124,"state":{},"cells":[{"id":125,"rows":[],"alias":"user-detail","bindings":{"userId":"viewUser.id","account":"viewUser.account","serviceContext":"page.serviceContext"},"name":null,"state":{"hideMode":"event"},"target":"sidebar","on":"viewUser","class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":["spacing_medium","width_min-medium"],"conditions":{},"defaultVariant":"page-column-user-detail"}}},"closeable":false,"preventAutoClose":true}],"class":null,"customId":null,"condition":null,"direction":null,"align":null,"on":null,"collapsed":false,"name":null,"aris":{"components":{"page-row":{"variant":null,"modifiers":[],"options":[],"conditions":{}}}}},{"id":135,"state":{"hideMode":null},"cells":[{"id":137,"rows":[{"id":138,"state":{},"cells":[{"id":139,"rows":[{"id":140,"state":{},"cells":[{"id":141,"rows":[],"alias":"typography-h2","bindings":{},"name":"Form title","state":{"content":"%{Create Account}","fragments":{}},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column-typography-h2"},"typography":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"typography-h2"}}},"templateReferenceId":"form-templates-2","templateFragmentId":16},{"id":142,"rows":[],"alias":"page-button","bindings":{},"name":"Close button","state":{"bindings":{},"actionTarget":null,"activeRoutes":[],"clickEvent":{"eventFields":[],"name":null},"fragments":{},"icon":"times","emitClose":false,"content":"","triggers":[{"actions":[],"trigger":"activate","closeEvent":true}]},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column-page-button"},"page-button":{"variant":"ghost","modifiers":[],"options":["position_right"],"conditions":{}}}},"templateReferenceId":"form-templates-2","templateFragmentId":17}],"class":null,"customId":null,"condition":null,"direction":null,"align":null,"on":null,"collapsed":false,"name":null,"aris":{"components":{"page-row":{"variant":null,"modifiers":[],"options":["align_space-between"],"conditions":{}}}},"templateReferenceId":"form-templates-2","templateFragmentId":15}],"alias":null,"bindings":{},"name":"Title container","state":{},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column"}}},"templateReferenceId":"form-templates-2","templateFragmentId":14},{"id":143,"rows":[{"id":144,"state":{},"cells":[{"id":150,"rows":[],"alias":"page-form-text","bindings":{},"name":"Alias","state":{"name":"formCreateAccount.body.alias","label":"%{Alias}","hideMode":null,"textType":null,"bindings":{}},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column-page-form-text"},"form-component":{"variant":null,"modifiers":[],"options":[],"conditions":{}}}}},{"id":202,"rows":[{"id":203,"state":{"hideMode":null},"cells":[{"id":201,"rows":[],"alias":"page-form-text","bindings":{},"name":"First name","state":{"name":"formCreateAccount.body.givenName","label":"%{Given name}","hideMode":null,"textType":null,"bindings":{}},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":["fill_normal"],"conditions":{},"defaultVariant":"page-column-page-form-text"},"form-component":{"variant":null,"modifiers":[],"options":[],"conditions":{}}}}},{"id":204,"rows":[],"alias":"page-form-text","bindings":{},"name":"Last name","state":{"name":"formCreateAccount.body.familyName","label":"%{Family name}","hideMode":null,"textType":null,"bindings":{}},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":["fill_normal"],"conditions":{},"defaultVariant":"page-column-page-form-text"},"form-component":{"variant":null,"modifiers":[],"options":[],"conditions":{}}}}}],"class":null,"customId":null,"condition":null,"direction":null,"align":null,"on":null,"collapsed":false,"name":null,"aris":{"components":{"page-row":{"variant":null,"modifiers":[],"options":["spacing_gap-small"],"conditions":{}}}}}],"alias":null,"bindings":{},"name":"Wrapper for Text","state":{},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column-page-form-text"},"form-component":{"variant":null,"modifiers":[],"options":[],"conditions":{}}}}},{"id":166,"rows":[],"alias":"page-form-password","bindings":{},"name":"Password","state":{"name":"formCreateAccount.body.password","label":"%{Password}","hideMode":null},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column-page-form-password"},"form-component":{"variant":null,"modifiers":[],"options":[],"conditions":{}}}}},{"id":151,"rows":[],"alias":"page-form-enumeration-operation","bindings":{},"name":"Alias Type Id","state":{"name":"formCreateAccount.body.aliasTypeId","label":"%{Alias Type}","hideMode":null,"enumerationProvider":null,"enumerationOperation":"nabu.cms.core.v2.manage.masterdata.entry.suggest","enumerationOperationLabel":"name","enumerationOperationValue":"id","enumerationOperationQuery":"q","enumerationOperationBinding":{"contextId":"page.context.id","masterDataCategoryName":"fixed.aliasType"},"enumerationCachingKey":"id"},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column-page-form-enumeration-operation"},"form-component":{"variant":null,"modifiers":[],"options":[],"conditions":{}}}}},{"id":152,"rows":[],"alias":"page-form-switch","bindings":{},"name":"Anonymous","state":{"name":"formCreateAccount.body.anonymous","label":"%{Anonymous}"},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column"}}}},{"id":175,"rows":[],"alias":"page-form-switch","bindings":{},"name":"Verified","state":{"name":"formCreateAccount.body.userVerified","label":"%{Verified}","hideMode":null},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column-page-form-switch"},"form-component":{"variant":null,"modifiers":[],"options":[],"conditions":{}}}}}],"class":null,"customId":null,"condition":null,"direction":null,"align":null,"on":null,"collapsed":false,"name":"Form fields","aris":{"components":{"page-row":{"variant":null,"modifiers":[],"options":["direction_vertical","spacing_vertical-gap-medium"],"conditions":{}}}},"templateReferenceId":"form-templates-2","templateFragmentId":19}],"alias":null,"bindings":{},"name":"Field Container","state":{"fileTypes":[],"name":"documentForm.body.content","contentType":"documentForm.body.contentType","fileName":"documentForm.body.contentName"},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column"}},"rerender":true},"templateReferenceId":"form-templates-2","templateFragmentId":18},{"id":145,"rows":[{"id":146,"state":{"handledEvent":{"eventFields":[],"name":null}},"cells":[{"id":147,"rows":[],"alias":"page-button","bindings":{},"name":"Submit button","state":{"content":"%{Create}","bindings":{},"actionTarget":137,"activeRoutes":[],"clickEvent":{"eventFields":[],"name":null},"fragments":{},"action":"submit","actionEvent":"addedDocument","triggers":[{"actions":[{"event":null,"url":null,"action":"submit","actionTarget":137,"actionEvent":null,"route":null,"mask":null,"anchor":null,"activeRoutes":[],"bindings":{},"type":"action"},{"event":null,"url":null,"action":"refresh","actionTarget":14,"actionEvent":null,"route":null,"mask":null,"anchor":null,"activeRoutes":[],"bindings":{},"type":"action"}],"trigger":"activate","closeEvent":true}],"hideMode":null,"activationType":"route"},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column-page-button"},"page-button":{"variant":"primary","modifiers":[],"options":[],"conditions":{}}}},"templateReferenceId":"form-templates-2","templateFragmentId":22},{"id":148,"rows":[],"alias":"page-button","bindings":{},"name":"Cancel button","state":{"bindings":{},"actionTarget":null,"activeRoutes":[],"clickEvent":{"eventFields":[],"name":null},"fragments":{},"content":"%{Cancel}","emitClose":false,"triggers":[{"actions":[],"trigger":"activate","closeEvent":true}]},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column-page-button"},"page-button":{"variant":"neutral","modifiers":[],"options":[],"conditions":{}}}},"templateReferenceId":"form-templates-2","templateFragmentId":23}],"class":null,"customId":null,"condition":null,"direction":null,"align":null,"on":null,"collapsed":false,"name":"Global actions","aris":{"components":{"page-row":{"variant":null,"modifiers":[],"options":[],"conditions":{}},"renderer-menu":{"variant":null,"modifiers":[],"options":["spacing_horizontal-gap-large","align_space-between"],"conditions":{}}}},"renderer":"menu","rendererBindings":{},"templateReferenceId":"form-templates-2","templateFragmentId":21}],"alias":null,"bindings":{},"name":"Form menu","state":{},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column"}}},"templateReferenceId":"form-templates-2","templateFragmentId":20}],"class":null,"customId":null,"condition":null,"direction":null,"align":null,"on":null,"collapsed":false,"name":null,"aris":{"components":{"page-row":{"variant":null,"modifiers":[],"options":["direction_vertical","spacing_vertical-gap-large"],"conditions":{}}}},"templateReferenceId":"form-templates-2","templateFragmentId":13}],"alias":null,"bindings":{},"name":"Create Account Form","state":{"hideMode":"toggle"},"target":"prompt","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":{"eventFields":[],"name":null},"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column"},"form":{"variant":"vertical","modifiers":[],"options":["shadow_xsmall","color_background","spacing_large"],"conditions":{}},"form-container":{"variant":null,"modifiers":[],"options":[],"conditions":{}}}},"renderer":"form","rendererBindings":{"contextId":"page.contextId"},"form":{"formType":"operation","operation":"nabu.cms.core.v2.manage.security.realm.account.create","bindings":{},"fields":[]},"runtimeAlias":"formCreateAccount","isTemplate":false,"templateVersion":4,"templateId":null,"templateTitle":"Popup Form Template","templateCategory":"Nabu Templates","templateStable":null,"isTemplateInstance":true,"templateReferenceId":"form-templates-2","templateFragmentId":12,"closeable":true},{"id":186,"rows":[{"id":187,"state":{"hideMode":null},"cells":[{"id":188,"rows":[{"id":189,"state":{},"cells":[{"id":190,"rows":[],"alias":"typography-h2","bindings":{},"name":"Form title","state":{"content":"<div style=\"text-align: center;\"><span style=\"background-color: transparent; font-size: calc(1.5rem + 0.2vw); text-decoration-line: inherit; text-transform: inherit;\">%{Synchronize user}</span></div>","fragments":{},"hideMode":null},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column-typography-h2"},"typography":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"typography-h2"}}},"templateReferenceId":"form-templates-2","templateFragmentId":16},{"id":191,"rows":[],"alias":"page-button","bindings":{},"name":"Close button","state":{"bindings":{},"actionTarget":null,"activeRoutes":[],"clickEvent":{"eventFields":[],"name":null},"fragments":{},"icon":"times","emitClose":false,"content":"","triggers":[{"actions":[],"trigger":"activate","closeEvent":true}]},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column-page-button"},"page-button":{"variant":"ghost","modifiers":[],"options":["position_right"],"conditions":{}}}},"templateReferenceId":"form-templates-2","templateFragmentId":17}],"class":null,"customId":null,"condition":null,"direction":null,"align":null,"on":null,"collapsed":false,"name":null,"aris":{"components":{"page-row":{"variant":null,"modifiers":[],"options":["align_space-between"],"conditions":{}}}},"templateReferenceId":"form-templates-2","templateFragmentId":15}],"alias":null,"bindings":{},"name":"Title container","state":{},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column"}}},"templateReferenceId":"form-templates-2","templateFragmentId":14},{"id":192,"rows":[{"id":193,"state":{"hideMode":null},"cells":[{"id":198,"rows":[],"alias":"page-form-enumeration-operation","bindings":{},"name":null,"state":{"hideMode":null,"bindings":{},"triggers":[],"enumerationProvider":null,"enumerationOperation":"nabu.cms.core.v2.manage.security.context.list","enumerationOperationLabel":"name","enumerationOperationValue":"id","enumerationOperationQuery":null,"enumerationOperationBinding":{"component":"fixed.proxy"},"label":"To context","name":"formSynchronizeUser.targetContextId"},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column-page-form-enumeration-operation"},"form-component":{"variant":null,"modifiers":[],"options":[],"conditions":{}}}}}],"class":null,"customId":null,"condition":null,"direction":null,"align":null,"on":null,"collapsed":false,"name":"Form fields","aris":{"components":{"page-row":{"variant":null,"modifiers":[],"options":["direction_vertical","spacing_vertical-gap-medium"],"conditions":{}}}},"templateReferenceId":"form-templates-2","templateFragmentId":19}],"alias":null,"bindings":{},"name":"Field Container","state":{"fileTypes":[],"name":"documentForm.body.content","contentType":"documentForm.body.contentType","fileName":"documentForm.body.contentName"},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column"}},"rerender":true},"templateReferenceId":"form-templates-2","templateFragmentId":18},{"id":194,"rows":[{"id":195,"state":{"handledEvent":{"eventFields":[],"name":null}},"cells":[{"id":196,"rows":[],"alias":"page-button","bindings":{},"name":"Submit button","state":{"content":"%{Synchronize}","bindings":{},"actionTarget":186,"activeRoutes":[],"clickEvent":{"eventFields":[],"name":null},"fragments":{},"action":"submit","actionEvent":"addedDocument","triggers":[{"actions":[{"event":null,"url":null,"action":"submit","actionTarget":186,"actionEvent":null,"route":null,"mask":null,"anchor":null,"activeRoutes":[],"bindings":{},"type":"action"}],"trigger":"activate","closeEvent":true}],"hideMode":null,"activationType":"route"},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column-page-button"},"page-button":{"variant":"primary","modifiers":[],"options":[],"conditions":{}}}},"templateReferenceId":"form-templates-2","templateFragmentId":22},{"id":197,"rows":[],"alias":"page-button","bindings":{},"name":"Cancel button","state":{"bindings":{},"actionTarget":null,"activeRoutes":[],"clickEvent":{"eventFields":[],"name":null},"fragments":{},"content":"%{Cancel}","emitClose":false,"triggers":[{"actions":[],"trigger":"activate","closeEvent":true}]},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column-page-button"},"page-button":{"variant":"neutral","modifiers":[],"options":[],"conditions":{}}}},"templateReferenceId":"form-templates-2","templateFragmentId":23}],"class":null,"customId":null,"condition":null,"direction":null,"align":null,"on":null,"collapsed":false,"name":"Global actions","aris":{"components":{"page-row":{"variant":null,"modifiers":[],"options":[],"conditions":{}},"renderer-menu":{"variant":null,"modifiers":[],"options":["spacing_horizontal-gap-large","align_space-between"],"conditions":{}}}},"renderer":"menu","rendererBindings":{},"templateReferenceId":"form-templates-2","templateFragmentId":21}],"alias":null,"bindings":{},"name":"Form menu","state":{},"target":"page","on":null,"class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":null,"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column"}}},"templateReferenceId":"form-templates-2","templateFragmentId":20}],"class":null,"customId":null,"condition":null,"direction":null,"align":null,"on":null,"collapsed":false,"name":null,"aris":{"components":{"page-row":{"variant":null,"modifiers":[],"options":["direction_vertical","spacing_vertical-gap-large"],"conditions":{}}}},"templateReferenceId":"form-templates-2","templateFragmentId":13}],"alias":null,"bindings":{},"name":"Synchronize user form","state":{"hideMode":"event"},"target":"prompt","on":"synchronizeUser","class":null,"customId":null,"width":null,"height":null,"condition":null,"devices":[],"clickEvent":{"eventFields":[],"name":null},"aris":{"components":{"page-column":{"variant":null,"modifiers":[],"options":[],"conditions":{},"defaultVariant":"page-column"},"form":{"variant":"vertical","modifiers":[],"options":["shadow_xsmall","color_background","spacing_large"],"conditions":{}},"form-container":{"variant":null,"modifiers":[],"options":[],"conditions":{}}}},"renderer":"form","rendererBindings":{"userId":"synchronizeUser.user.id"},"form":{"bindings":{},"fields":[],"formType":"operation","operation":"nabu.cms.core.v2.manage.security.context.synchronizeUser"},"runtimeAlias":"formSynchronizeUser","isTemplate":false,"templateVersion":4,"templateId":null,"templateTitle":"Popup Form Template","templateCategory":"Nabu Templates","templateStable":null,"isTemplateInstance":true,"templateReferenceId":"form-templates-2","templateFragmentId":12,"closeable":false,"startVisible":false}],"class":null,"customId":null,"condition":null,"direction":null,"align":null,"on":null,"collapsed":false,"name":null,"aris":{"components":{"page-row":{"variant":null,"modifiers":[],"options":[],"conditions":{}}}}}],"path":null,"counter":249,"variables":[],"query":[],"actions":[],"class":null,"initial":false,"menuX":0,"menuY":0,"states":[{"name":"impersonateables","operation":"nabu.cms.core.v2.manage.security.realm.impersonateables","bindings":{"realmId":"page.contextId"},"condition":null,"updateEvent":{"eventFields":[],"name":null}},{"name":"listableContexts","operation":"nabu.cms.core.v2.manage.security.account.read.contexts","bindings":{},"condition":null,"updateEvent":{"eventFields":[],"name":null}}],"category":"Security","slow":false,"name":"security-context-accounts","pageParent":null,"aris":{"components":{"page-grid":{"variant":null,"modifiers":[],"options":[],"conditions":{}}}},"parameters":[{"name":"roles","type":"nabu.cms.core.v2.manage.security.context.role.roleOutputList","format":null,"default":null,"global":false,"listeners":[]},{"name":"publicRoles","type":null,"format":null,"default":null,"global":false,"listeners":[],"complexDefault":true,"defaultScript":"function() {\n\tvar roles = $value(\"roles.results\");\n\treturn !roles ? [] : roles.filter(function(x) {\n\t\treturn !x.pseudo;\n\t})\n}","updatedEvent":{"eventFields":[],"name":null}},{"name":"limitAccountToRoleIds","type":null,"format":null,"default":null,"global":false,"listeners":[]},{"name":"contextId","type":null,"format":null,"default":null,"global":false,"listeners":[]},{"name":"entityIdToAdd","type":null,"format":null,"default":null,"global":false,"listeners":[]},{"name":"context","type":"nabu.cms.core.v2.manage.security.context.nodeDetail","format":null,"default":null,"global":false,"listeners":[],"triggers":[]},{"name":"userSearchContextId","type":null,"format":null,"default":"=$value(\"page.contextId\")","global":false,"listeners":[],"updatedEvent":{"eventFields":[],"name":null}},{"name":"serviceContext","type":null,"format":null,"default":null,"global":false,"listeners":[],"triggers":[]},{"name":"synchronizableContexts","type":null,"format":null,"default":null,"global":false,"listeners":[],"triggers":[],"updatedEvent":{"eventFields":[],"name":null},"complexDefault":true,"defaultScript":"function() {\n\tvar serviceContext = $value(\"page.serviceContext\");\n\t//var proxies = $value(\"page.listableContexts.results\");\n\tvar proxies = $value(\"parent.repeatContext.records\");\n\tconsole.log(\"proxies are\", proxies, $value(\"parent.repeatContext\"));\n\tif (proxies && proxies.length) {\n\t\tproxies = proxies.filter(function(x) {\n\t\t\treturn x.componentName == \"proxy\";\n\t\t});\n\t}\n\tif (proxies && proxies.length) {\n\t\t// you need to have user manage permission in the target context\n\t\t// if you have it in _any_ context in that proxy, you can create it\n\t\t// locally giving the user permissions depends on the contextual security at that point\n\t\tvar allowed = $services.user.normalizedPermissions.filter(function(x) {\n\t\t\treturn x[2] == \"user.manage\" && x[0] != serviceContext;\n\t\t}).map(function(x) {\n\t\t\treturn x[0];\n\t\t});\n\t\treturn proxies.filter(function(x) {\n\t\t\treturn allowed.indexOf(x) >= 0;\n\t\t});\n\t}\n\treturn [];\n}"}],"serviceContext":"page.serviceContext","formatters":[],"title":null}